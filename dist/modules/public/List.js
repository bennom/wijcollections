/*! wijcollections - v2.2.0 - 2013-12-27
* https://github.com/webinfluenza/wijcollections
* Copyright (c) 2013 Benno Mielke; Licensed MIT */

define(["private/AbstractCollection","private/ListObject"],function(t,i){function s(){var t=this;t.list=[],t.listObject=new i}return s.prototype=new t,s.prototype.constructor=s,s.prototype.add=function(t){if(void 0!==t){if(this.needsHashing(t)){var i=this.getHash(t);return this.listObject.contains(i)?this.listObject.add(t):this.list.push(this.listObject.add(t)),!0}return t.constructor===Function?null:(this.list.push(t),!0)}return null},s.prototype.addAt=function(t,i){if(void 0===t)return null;var s=this.size();return void 0!==i&&i.constructor===Number&&i>-1?this.needsHashing(t)&&this.listObject.contains(this.getHash(t))?(this.listObject.add(t),!0):0===i?(this.needsHashing(t)?this.list.unshift(this.listObject.add(t)):this.list.unshift(t),!0):i>0&&s-1>i?(this.needsHashing(t)?this.list.splice(i,0,this.listObject.add(t)):this.list.splice(i,0,t),!0):i>=s-1?(this.needsHashing(t)?this.list.push(this.listObject.add(t)):this.list.push(t),!0):void 0:(this.needsHashing(t)?this.list.push(this.listObject.add(t)):this.list.push(t),!0)},s.prototype.get=function(t){return void 0===t?null:t>=0&&t<this.list.length?this.listObject.contains(this.list[t])?this.listObject.get(this.list[t]).ref:this.list[t]:null},s.prototype.clear=function(){this.list.length=0,this.listObject.reset()},s.prototype.size=function(t){return t?this.list.length+this.listObject.getDuplicateCount():this.list.length},s.prototype.indexOf=function(t){return void 0!==t?this.needsHashing(t)?(t.constructor===Object&&(t=this.sortObjectByKeys(t)),this.list.indexOf(this.getHash(t))):this.list.indexOf(t):-1},s.prototype.contains=function(t){return void 0!==t?this.indexOf(t)>-1:null},s.prototype.isEmpty=function(){return 0===this.list.length},s.prototype.remove=function(t,i){if(void 0===t)return!1;if(this.needsHashing(t)){var s=this.getHash(t),e=this.indexOf(s);if(0>e)return!1;if(!(this.listObject.getObjectCount(s)<2||i))return this.listObject.remove(s),!0;if(this.listObject.delete(s),1===this.list.splice(e,1).length)return!0}else{var n=this.indexOf(t);if(0>n)return!1;if(1===this.list.splice(n,1).length)return!0}return!1},s.prototype.set=function(t,i){var s;return void 0===t||void 0===i?null:0>i||i>=this.size()?null:(null!==this.listObject.get(this.list[i])?(s=this.listObject.get(this.list[i]).ref,this.list[i]=t.constructor===String?t:this.listObject.replace(this.list[i],t)):t.constructor===String?(s=this.list[i],this.list[i]=t):(s=this.list[i],this.list[i]=this.listObject.add(t)),s)},s.prototype.toString=function(){return this.list.toString()},s});