/*
 * wijcollections - List
 * https://github.com/webinfluenza/wijcollections
 *
 * Copyright (c) 2013 Benno Mielke
 * Licensed under the MIT license.
 */

define("wijcModules/public/List",["wijcModules/private/AbstractCollection","wijcModules/private/ListObject"],function(e,t){function n(){var e=this;e.list=[],e.listObject=new t}return n.prototype=new e,n.prototype.constructor=n,n.prototype.add=function(e){if(e!==undefined){if(this.needsHashing(e)){var t=this.getHash(e);return this.listObject.contains(t)?this.listObject.add(e):this.list.push(this.listObject.add(e)),!0}return e.constructor===Function?null:(this.list.push(e),!0)}return null},n.prototype.addAt=function(e,t){if(e!==undefined){var n=this.size();if(t!==undefined&&t.constructor===Number){if(this.needsHashing(e)){var r=this.getHash(e);if(this.listObject.contains(r))return this.listObject.add(e),!0}return t===0?(this.needsHashing(e)?this.list.unshift(this.listObject.add(e)):this.list.unshift(e),!0):t>0&&t<n-1?(this.needsHashing(e)?this.list.splice(t,0,this.listObject.add(e)):this.list.splice(t,0,e),!0):t>=n-1?(this.needsHashing(e)?this.list.push(this.listObject.add(e)):this.list.push(e),!0):null}return this.needsHashing(e)?this.list.push(this.listObject.add(e)):this.list.push(e),!0}return null},n.prototype.get=function(e){return typeof e!==undefined&&e>=0&&e<this.list.length?this.listObject.contains(this.list[e])?this.listObject.get(this.list[e]).ref:this.list[e]:null},n.prototype.clear=function(){this.list.length=0,this.listObject.reset()},n.prototype.size=function(e){return e?this.list.length+this.listObject.getDuplicateCount():this.list.length},n.prototype.indexOf=function(e){return e!==undefined?this.needsHashing(e)?(e.constructor===Object&&(e=this.sortObjectByKeys(e)),this.list.indexOf(this.getHash(e))):this.list.indexOf(e):-1},n.prototype.contains=function(e){return e!==undefined?this.indexOf(e)>-1:null},n.prototype.isEmpty=function(){return this.list.length===0},n.prototype.remove=function(e,t){if(e!==undefined)if(this.needsHashing(e)){var n=this.getHash(e),r=this.indexOf(n);if(r>-1){if(!(this.listObject.getObjectCount(n)<2||t))return this.listObject.remove(n),!0;this.listObject.delete(n);if(this.list.splice(r,1).length===1)return!0}}else{var i=this.indexOf(e);if(i>-1&&this.list.splice(i,1).length===1)return!0}return!1},n.prototype.set=function(e,t){var n;return e===undefined||t===undefined?null:t<0||t>=this.size()?null:(this.listObject.get(this.list[t])!==null?(n=this.listObject.get(this.list[t]).ref,e.constructor===String?this.list[t]=e:this.list[t]=this.listObject.replace(this.list[t],e)):e.constructor===String?(n=this.list[t],this.list[t]=e):(n=this.list[t],this.list[t]=this.listObject.add(e)),n)},n.prototype.toString=function(){return this.list.toString()},n}),define("modules/public/List",function(){});